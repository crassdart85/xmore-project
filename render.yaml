services:
  # Web Dashboard
  - type: web
    name: trading-dashboard
    env: node
    rootDir: web-ui
    buildCommand: npm install
    startCommand: node init-db.js && node server.js
    envVars:
      - key: DATABASE_URL
        fromDatabase:
          name: trading-db
          property: connectionString
      - key: JWT_SECRET
        generateValue: true

  # Note: Scheduled tasks run via GitHub Actions (.github/workflows/scheduled-tasks.yml)

databases:
  - name: trading-db
    databaseName: trading_system
    user: trading_user
